# Migration `20201025000108-ownership`

This migration has been generated by Samuel Cook at 10/24/2020, 7:01:08 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;
CREATE TABLE "new_Event" (
    "id" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,
    "name" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "description" TEXT NOT NULL,
    "datetime" DATETIME NOT NULL,
    "duration" INTEGER NOT NULL,
    "online" BOOLEAN NOT NULL DEFAULT true,
    "location" TEXT NOT NULL,
    "ownerId" INTEGER NOT NULL DEFAULT 0,
    "userId" INTEGER NOT NULL DEFAULT 0,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
);
INSERT INTO "new_Event" ("id", "createdAt", "updatedAt", "name", "title", "description", "datetime", "duration", "online", "location", "ownerId") SELECT "id", "createdAt", "updatedAt", "name", "title", "description", "datetime", "duration", "online", "location", "ownerId" FROM "Event";
DROP TABLE "Event";
ALTER TABLE "new_Event" RENAME TO "Event";
PRAGMA foreign_key_check;
PRAGMA foreign_keys=ON
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201024202819-init..20201025000108-ownership
--- datamodel.dml
+++ datamodel.dml
@@ -4,15 +4,15 @@
 // In case you don't want to set up docker and docker-compose:
 // 1. Comment this datasource
 // datasource db {
 //   provider = "postgresql"
-//   url = "***"
+//   url = "***"
 // }
 // 2. Uncomment this datasource
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
+  url = "***"
   //use this on local
 }
 generator client {
@@ -29,8 +29,9 @@
   email          String    @unique
   hashedPassword String?
   role           String    @default("user")
   sessions       Session[]
+  events         Event[]
 }
 model Session {
   id                 Int       @id @default(autoincrement())
@@ -49,14 +50,16 @@
 model Event {
   id          String   @id @default(uuid())
   createdAt   DateTime @default(now())
   updatedAt   DateTime @updatedAt
-  // tags        String[]
+  // tags        []
   name        String
   title       String
   description String
   datetime    DateTime
   duration    Int // integer represents minutes
   online      Boolean  @default(true)
   location    String
   ownerId     Int      @default(0)
+  User        User     @relation(fields: [userId], references: [id])
+  userId      Int      @default(0)
 }
```


